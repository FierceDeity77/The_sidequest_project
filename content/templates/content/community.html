{% extends "base.html" %}
{% load static %}

{% block page_title %} Communities {% endblock %}


{% block layout %}
<section class="community-list-section my-4">
  <h2 class="mb-3">Communities</h2>

  <div class="row g-3">
    {% for community in communities %}
      <div class="col-lg-3 col-md-6 col-sm-12">
        <li class="d-flex align-items-center py-2 list-unstyled">
          <!-- Number -->
          <span class="fw-bold me-2 text-primary">{{ forloop.counter }}.</span>

          <!-- Thumbnail / logo -->
          {% if community.icon %}
            <img src="{{ community.icon.url }}" alt="{{ community.name }}"
                 class="rounded me-2" width="40" height="40">
          {% else %}
            <div class="rounded bg-secondary me-2" 
                 style="width:40px; height:40px;"></div>
          {% endif %}

          <!-- Name + description -->
          <div>
            <!-- Community title (smaller but bold) -->
            <a href="{% url 'content:community-detail' community.slug %}" 
              class="fw-bold text-decoration-none text-dark d-block"
              style="font-size: 0.9rem;">
              {{ community.name }}
            </a>

            <!-- Description (tiny muted) -->
            {% if community.description %}
              <p class="text-muted mb-0" style="font-size: 0.75rem;">
                {{ community.description|truncatechars:60 }}
              </p>
            {% endif %}

            <!-- Followers count (extra tiny) -->
            <span class="text-muted d-block" style="font-size: 0.7rem;">
              {{ community.member_count }} follower{{ community.member_count|pluralize }}
            </span>
          </div>
        </li>
      </div>
    {% empty %}
      <p class="text-muted">No communities yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}