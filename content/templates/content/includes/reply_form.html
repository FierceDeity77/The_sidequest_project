{% load static %}


<!-- Reply link -->
<a href="javascript:void(0);" 
   class="reply-link text-muted small d-inline-flex align-items-center gap-1"
   onclick="toggleReplyForm({{ comment.id }})">
  <i class="bi bi-chat-left-text"></i> Reply
</a>

<!-- Hidden reply form -->
<div id="reply-form-{{ comment.id }}" class="reply-form mt-2" style="display:none;">
  <form method="post" action="{% url 'content:add-comment' topic.slug comment.id %}" class="comment-form">
    {% csrf_token %}
    <div class="d-flex align-items-start gap-2">
      {% if request.user.is_authenticated and request.user.avatar %}
        <img src="{{ request.user.avatar.url }}"
             alt="avatar"
             class="rounded-circle"
             width="28" height="28"
             onerror="this.onerror=null;this.src='{% static 'default_images/default-avatar.jpg' %}';">
      {% else %}
        <img src="{% static 'default_images/default-avatar.jpg' %}"
             alt="avatar"
             class="rounded-circle"
             width="28" height="28">
      {% endif %}

      <div class="flex-grow-1">
        <textarea name="text" 
                  class="form-control form-control-sm border rounded-3 p-2"
                  rows="2"
                  placeholder="Write a reply..." 
                  required></textarea>
        <div class="d-flex justify-content-end mt-1">
          <button type="submit" class="btn btn-sm btn-secondary">
            Reply
          </button>
        </div>
      </div>
    </div>
  </form>
</div>