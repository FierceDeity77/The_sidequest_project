{% extends "base.html" %}
{% load static %}

{% block page_title %} Home {% endblock %}

{% block content %}
  <!-- News Feed -->
  {% for topic in topics %}
    {% if topic.author.avatar %}
    <div class="card mb-3">
      <div class="card-body">
        <div class="d-flex align-items-center mb-2">
          <img src="{{ topic.author.avatar.url }}" 
               class="rounded-circle me-2" 
               width="40" height="40" 
               alt="{{ topic.author.username }}">
          <div>
            <h6 class="mb-0 fw-semibold">{{ topic.author.username }}</h6>
            <small class="text-muted">
              Posted {{ topic.created_at|timesince }} ago in {{ topic.community.name }} 
              <span class="text-primary">{{ topic.game.title }}</span>
            </small>
          </div>
        </div>
        <p class="mb-2">{{ topic.title }}</p>

        <div class="d-flex justify-content-between text-muted small">
          <span><i class="fa-regular fa-thumbs-up me-1"></i> Likes</span>
          <span><i class="fa-regular fa-comment me-1"></i> {{ topic.comment_count }} Comments</span>
          <span><i class="fa-solid fa-share me-1"></i> Share</span>
        </div>
      </div>
    </div>
    {% endif %}
  {% empty %}
    <p class="text-muted text-center">No posts yet. Be the first to post!</p>
  {% endfor %}
{% endblock %}


{% block right_panel %}
  <!-- Trending / Popular sections remain the same -->
  <div class="card mb-3">
    <div class="card-header fw-bold small">Trending Games</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item small">Elden Ring</li>
      <li class="list-group-item small">Resident Evil 4 Remake</li>
      <li class="list-group-item small">Final Fantasy XVI</li>
    </ul>
  </div>

  <div class="card mb-3">
    <div class="card-header fw-bold small">Top Contributors</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item small">Jograt3341</li>
      <li class="list-group-item small">Burikitong_xXx</li>
      <li class="list-group-item small">Captain_Bonjing</li>
      <li class="list-group-item small">RoBuRat</li>
      <li class="list-group-item small">jEwEl_oF_tHe_m0rdor</li>
    </ul>
  </div>

  <div class="card mb-3">
    <div class="card-header fw-bold small">Popular News</div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item small">Witcher 4 Launch Trailer</li>
      <li class="list-group-item small">Persona 4 Revival Release Date</li>
      <li class="list-group-item small">FFVIII Remake Part 3 delayed?</li>
      <li class="list-group-item small">Playstation 6 announcement?</li>
      <li class="list-group-item small">Persona 6 finally in development</li>
    </ul>
  </div>
{% endblock %}